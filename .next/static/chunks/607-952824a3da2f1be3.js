"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[607],{752:(e,t,r)=>{r.d(t,{ReservationProvider:()=>h,m:()=>x});var s=r(5155),a=r(2115),n=r(1408),o=r(5895),l=r(7455),i=r(4606),d=r(5644),c=r(3941);function m(e){let{isOpen:t,onClose:r}=e,{t:m,language:u}=(0,i.o)(),[x,h]=(0,a.useState)({name:"",email:"",phone:"",date:"",time:"",guests:"2",notes:""}),[p,b]=(0,a.useState)(!1),[g,v]=(0,a.useState)(""),[f,j]=(0,a.useState)(""),[N,y]=(0,a.useState)([]);(0,a.useEffect)(()=>{t||(b(!1),v(""),j(""),y([]),h({name:"",email:"",phone:"",date:"",time:"",guests:"2",notes:""}))},[t]),(0,a.useEffect)(()=>{if(x.date){let e=new Date(x.date);if(y((0,d.oZ)(e)),x.time){let[t,r]=x.time.split(":").map(Number);(0,d.LJ)(e,t,r)||(h(e=>({...e,time:""})),j(""))}(0,d.Au)(e)?v(""):v(m.reservationErrors.closedOnTuesdays)}else y([]),v("")},[x.date]),(0,a.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]);let k=async e=>{if(e.preventDefault(),x.date&&x.time){let e=new Date(x.date),[t,r]=x.time.split(":").map(Number);if(!(0,d.LJ)(e,t,r))return void j(m.reservationErrors.selectValidTime)}if(x.date&&!(0,d.Au)(new Date(x.date)))return void v(m.reservationErrors.closedOnTuesdays);try{let e={customer_name:x.name,customer_phone:x.phone||null,customer_email:x.email||null,number_of_people:parseInt(x.guests),reservation_date:x.date,reservation_time:x.time,status:"confirmed",notes:x.notes||null};console.log("Envoi de la r\xe9servation \xe0 Supabase:",e);let{data:t,error:s}=await c.N.from("reservations").insert(e).select();if(s){console.error("Erreur lors de l'envoi de la r\xe9servation:",s),alert("Erreur lors de l'envoi de la r\xe9servation: "+s.message);return}console.log("R\xe9servation cr\xe9\xe9e avec succ\xe8s:",t),b(!0),setTimeout(()=>{b(!1),v(""),j(""),y([]),h({name:"",email:"",phone:"",date:"",time:"",guests:"2",notes:""}),r()},3e3)}catch(e){console.error("Erreur:",e),alert("Erreur lors de l'envoi de la r\xe9servation. Veuillez r\xe9essayer.")}},w=e=>{let{name:t,value:r}=e.target;if(h({...x,[t]:r}),"time"===t&&x.date){let e=new Date(x.date),[t,s]=r.split(":").map(Number);r&&!(0,d.LJ)(e,t,s)?j(m.reservationErrors.thisTimeNotAvailable):j("")}};return(0,s.jsx)(n.N,{children:t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,ease:[.25,.1,.25,1]},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100]",onClick:r}),(0,s.jsx)(o.P.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3,ease:[.25,.1,.25,1]},className:"fixed inset-0 z-[101] flex items-center justify-center p-4 pointer-events-none",children:(0,s.jsx)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto pointer-events-auto",onClick:e=>e.stopPropagation(),children:(0,s.jsxs)("div",{className:"p-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsx)("h2",{className:"text-3xl font-serif font-medium text-text-dark tracking-tight",children:m.reservation.title}),(0,s.jsx)("button",{onClick:r,className:"text-text-light hover:text-text-dark transition-colors duration-300","aria-label":m.common.required,children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),p?(0,s.jsxs)(o.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:[.25,.1,.25,1]},className:"text-center p-12",children:[(0,s.jsx)("div",{className:"text-5xl mb-4",children:"âœ“"}),(0,s.jsx)("h3",{className:"text-2xl font-serif font-medium text-text-dark mb-2",children:m.reservation.received}),(0,s.jsx)("p",{className:"text-text-body",children:m.reservation.receivedText})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-lg text-text-body mb-8 leading-relaxed",children:m.reservation.description}),(0,s.jsxs)("form",{onSubmit:k,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"modal-name",className:"block text-sm font-medium text-text-dark mb-2",children:[m.reservation.fullName," ",m.common.required]}),(0,s.jsx)("input",{type:"text",id:"modal-name",name:"name",required:!0,value:x.name,onChange:w,className:"w-full px-4 py-3 border border-parchment-300 rounded-md bg-parchment-50 text-text-dark focus:ring-2 focus:ring-charleston-green focus:border-charleston-green transition-all duration-300"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"modal-email",className:"block text-sm font-medium text-text-dark mb-2",children:[m.reservation.email," ",m.common.required]}),(0,s.jsx)("input",{type:"email",id:"modal-email",name:"email",required:!0,value:x.email,onChange:w,className:"w-full px-4 py-3 border border-parchment-300 rounded-md bg-parchment-50 text-text-dark focus:ring-2 focus:ring-charleston-green focus:border-charleston-green transition-all duration-300"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"modal-phone",className:"block text-sm font-medium text-text-dark mb-2",children:[m.reservation.phone," ",m.common.required]}),(0,s.jsx)("input",{type:"tel",id:"modal-phone",name:"phone",required:!0,value:x.phone,onChange:w,className:"w-full px-4 py-3 border border-parchment-300 rounded-md bg-parchment-50 text-text-dark focus:ring-2 focus:ring-charleston-green focus:border-charleston-green transition-all duration-300"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"modal-date",className:"block text-sm font-medium text-text-dark mb-2",children:[m.reservation.date," ",m.common.required]}),(0,s.jsx)("input",{type:"date",id:"modal-date",name:"date",required:!0,value:x.date,onChange:w,min:new Date().toISOString().split("T")[0],className:"w-full px-4 py-3 border rounded-md bg-parchment-50 text-text-dark focus:ring-2 focus:ring-charleston-green focus:border-charleston-green transition-all duration-300 ".concat(g?"border-red-300":"border-parchment-300")}),g&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:g}),x.date&&!g&&(0,s.jsx)("p",{className:"mt-1 text-xs text-text-light",children:N.length>0?"".concat(N.length," ").concat(m.reservationErrors.timeSlotsAvailable):m.reservationErrors.noAvailability})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"modal-time",className:"block text-sm font-medium text-text-dark mb-2",children:[m.reservation.time," ",m.common.required]}),N.length>0?(0,s.jsxs)("select",{id:"modal-time",name:"time",required:!0,value:x.time,onChange:w,className:"w-full px-4 py-3 border rounded-md bg-parchment-50 text-text-dark focus:ring-2 focus:ring-charleston-green focus:border-charleston-green transition-all duration-300 ".concat(f?"border-red-300":"border-parchment-300"),children:[(0,s.jsx)("option",{value:"",children:m.reservationErrors.selectTime}),N.map(e=>(0,s.jsx)("option",{value:e.label,children:e.label},e.label))]}):(0,s.jsx)("input",{type:"time",id:"modal-time",name:"time",required:!0,value:x.time,onChange:w,disabled:!x.date||0===N.length,className:"w-full px-4 py-3 border rounded-md bg-parchment-50 text-text-dark focus:ring-2 focus:ring-charleston-green focus:border-charleston-green transition-all duration-300 ".concat(f?"border-red-300":"border-parchment-300"," ").concat(x.date&&0!==N.length?"":"opacity-50 cursor-not-allowed")}),f&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f}),x.date&&0===N.length&&!g&&(0,s.jsx)("p",{className:"mt-1 text-xs text-text-light",children:m.reservationErrors.closedOnThisDay})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:"modal-guests",className:"block text-sm font-medium text-text-dark mb-2",children:[m.reservation.guests," ",m.common.required]}),(0,s.jsx)("select",{id:"modal-guests",name:"guests",required:!0,value:x.guests,onChange:w,className:"w-full px-4 py-3 border border-parchment-300 rounded-md bg-parchment-50 text-text-dark focus:ring-2 focus:ring-charleston-green focus:border-charleston-green transition-all duration-300",children:[1,2,3,4,5,6,7,8,9,10].map(e=>(0,s.jsxs)("option",{value:e,children:[e," ","fr"===u?1===e?"Personne":"Personnes":"de"===u?1===e?"Person":"Personen":1===e?"Guest":"Guests"]},e))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"modal-notes",className:"block text-sm font-medium text-text-dark mb-2",children:m.reservation.specialRequests}),(0,s.jsx)("textarea",{id:"modal-notes",name:"notes",rows:4,value:x.notes,onChange:w,className:"w-full px-4 py-3 border border-parchment-300 rounded-md bg-parchment-50 text-text-dark focus:ring-2 focus:ring-charleston-green focus:border-charleston-green transition-all duration-300",placeholder:m.reservation.specialRequestsPlaceholder})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[(0,s.jsx)("button",{type:"submit",className:"btn-primary flex-1",children:m.reservation.submit}),(0,s.jsx)("button",{type:"button",onClick:r,className:"btn-secondary flex-1",children:m.reservation.cancel})]})]}),(0,s.jsxs)("div",{className:"mt-8 p-6 bg-parchment-100 rounded-lg border border-parchment-300",children:[(0,s.jsx)("h3",{className:"text-lg font-serif font-medium text-text-dark mb-2",children:m.reservation.needHelp}),(0,s.jsxs)("p",{className:"text-text-body mb-2",children:[m.reservation.callUs," ",(0,s.jsx)("a",{href:"tel:".concat(l.U_.phone),className:"text-charleston-green hover:underline transition-colors duration-300",children:l.U_.phone})]}),(0,s.jsx)("p",{className:"text-sm text-text-light",children:m.reservation.needHelpText})]})]})]})})})]})})}let u=(0,a.createContext)(void 0);function x(){let e=(0,a.useContext)(u);if(!e)throw Error("useReservation must be used within ReservationProvider");return e}function h(e){let{children:t}=e,[r,n]=(0,a.useState)(!1),o=()=>n(!1);return(0,s.jsxs)(u.Provider,{value:{openReservation:()=>n(!0),closeReservation:o},children:[t,(0,s.jsx)(m,{isOpen:r,onClose:o})]})}},3141:(e,t,r)=>{r.d(t,{_:()=>n});var s=r(2115);let a=new Date("2025-02-01T00:00:00");function n(){let[e,t]=(0,s.useState)(!0),[r,n]=(0,s.useState)(!1),[o,l]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=()=>{let e=new Date,r=new Date(a),s=e.getFullYear()===r.getFullYear()&&e.getMonth()===r.getMonth()&&e.getDate()===r.getDate(),o=e>a;n(s),l(o&&!s),t(!o&&!s)};e();let r=setInterval(e,6e4);return()=>clearInterval(r)},[]),{isBeforeOpening:e,isOpeningDay:r,isAfterOpening:o,openingDate:a}}},3941:(e,t,r)=>{r.d(t,{N:()=>l});var s=r(2373),a=r(5704);let n=a.env.NEXT_PUBLIC_SUPABASE_URL||"https://rdisefatytjkgnqrbsqx.supabase.co",o=a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"sb_publishable_ft9Zonad32kpGyxeJBry9w_GaNtVCa3",l=(0,s.UU)(n,o)},7544:(e,t,r)=>{r.d(t,{x:()=>n});var s=r(5155),a=r(4606);function n(e){let{alt:t="Photo",width:r,height:n,fill:o=!1,className:l="",priority:i,quality:d,src:c,style:m,...u}=e,{language:x}=(0,a.o)(),h="fr"===x?"photo bient\xf4t disponible":"de"===x?"Foto bald verf\xfcgbar":"photo coming soon";return c?o?(0,s.jsx)("img",{src:c,alt:t,className:l,style:m,...u}):(0,s.jsx)("img",{src:c,alt:t,width:r,height:n,className:l,style:m,...u}):o?(0,s.jsx)("div",{className:"absolute inset-0 bg-gray-300 flex items-center justify-center ".concat(l),style:m,...u,children:(0,s.jsx)("div",{className:"text-center px-4",children:(0,s.jsx)("p",{className:"text-gray-600 text-sm md:text-base font-medium",children:h})})}):(0,s.jsx)("div",{className:"bg-gray-300 flex items-center justify-center ".concat(l),style:{width:r||"100%",height:n||"100%",...m},...u,children:(0,s.jsx)("div",{className:"text-center px-4",children:(0,s.jsx)("p",{className:"text-gray-600 text-sm md:text-base font-medium",children:h})})})}}}]);